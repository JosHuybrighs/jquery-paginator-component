;(function($,d,f,g){var h="paginator";var j={itemsCount:0,activePageIdx:0,maxPagesShown:5,itemsPerPage:5,allowKeyNavigation:true,onPageRequest:function(a,b){},onNextClick:function(a,b){},onPrevClick:function(a,b){}};function Plugin(a,b){this.element=a;this.settings=$.extend({},j,b);this._defaults=j;this._name=h;this._init()};Plugin.prototype={_init:function(){this.next=false;this.prev=false;this.currentPageIdx=0;if(this.settings.itemsPerPage>0){this.maxPage=(this.settings.itemsCount!=0)?Math.floor((this.settings.itemsCount-1)/this.settings.itemsPerPage)+1:0;this.leftIdx=0;this.rightIdx=this.maxPage-1;if(this.maxPage>1){this.next=true;$(this.element).addClass('paginatorComp');if(this.settings.itemsCount!=0){this.prevAnchor=$('<a href="#" class="pcPrev">&lt;</a>');this.prevAnchor.hide();var b=this;$(this.element).append(this.prevAnchor);this.itemAnchors=new Array;this.anchorCurrent=this.itemAnchors[0]=$('<a href="#" class="pcCurrent">1</a>');$(this.element).append(this.itemAnchors[0]);this.firstBreak=$('<span class="pcBreak">.&nbsp;.&nbsp;.</span>');this.firstBreak.hide();$(this.element).append(this.firstBreak);for(i=2;i<this.maxPage;i++){var c=$('<a href="#" class="pcSel">'+i+'</a>');$(this.element).append(c);if(this.maxPage>this.settings.maxPagesShown&&i>=this.settings.maxPagesShown){c.hide()}this.itemAnchors[i-1]=c}if(this.maxPage>1){this.lastBreak=$('<span class="pcBreak">.&nbsp;.&nbsp;.</span>');if(this.maxPage<=this.settings.maxPagesShown){this.lastBreak.hide()}else{this.rightIdx=this.settings.maxPagesShown-2}$(this.element).append(this.lastBreak);this.itemAnchors[this.maxPage-1]=$('<a href="#" class="pcSel">'+this.maxPage+'</a>');$(this.element).append(this.itemAnchors[this.maxPage-1])}this.nextAnchor=$('<a href="#" class="pcNext">&gt;</a>');$(this.element).append(this.nextAnchor);if(!this.next){this.nextAnchor.hide()}this.prevAnchor.ontouchclick(function(a){b._previous()});this.nextAnchor.ontouchclick(function(a){b._next()});if(b.settings.allowKeyNavigation){$('body').on('keyup.paginator',function(e){if(e.keyCode===39){b._next()}else if(e.keyCode===37){b._previous()}})}for(var i=0;i<this.maxPage;i++){this.itemAnchors[i].ontouchclick({pageIdx:i},function(a){b._selPage(a.data.pageIdx);b.settings.onPageRequest(b,b.currentPageIdx)})}}this._selPage(this.settings.activePageIdx)}}},_addPageRight:function(){var a=this.leftIdx+Math.ceil((this.rightIdx-this.leftIdx)/2);if(this.rightIdx!=(this.maxPage-1)&&this.currentPageIdx>a){this.firstBreak.show();var b=(this.leftIdx==0)?1:this.leftIdx;this.itemAnchors[b].hide();this.leftIdx=b+1;var c=this.rightIdx+1;this.itemAnchors[c].show();if(c==(this.maxPage-2)){this.lastBreak.hide();this.rightIdx=this.maxPage-1}else{this.rightIdx++}}},_addPageLeft:function(){var a=this.leftIdx+Math.floor((this.rightIdx-this.leftIdx)/2);if(this.leftIdx!=0&&this.currentPageIdx<a){this.lastBreak.show();var b=(this.rightIdx==(this.maxPage-1))?this.maxPage-2:this.rightIdx;this.itemAnchors[b].hide();this.rightIdx=b-1;var c=this.leftIdx-1;this.itemAnchors[c].show();if(c==1){this.firstBreak.hide();this.leftIdx=0}else{this.leftIdx--}}},_next:function(){if(this.next){if(this.currentPageIdx<=(this.maxPage-1)){this.currentPageIdx++}if(this.currentPageIdx==(this.maxPage-1)){this.next=false;this.nextAnchor.hide()}if(this.currentPageIdx!=0){this.prev=true;this.prevAnchor.show()}this.anchorCurrent.removeClass('pcCurrent').addClass('pcSel');this.anchorCurrent=this.itemAnchors[this.currentPageIdx];this.anchorCurrent.removeClass('pcSel').addClass('pcCurrent');this._addPageRight();this.settings.onNextClick(this,this.currentPageIdx);this.settings.onPageRequest(this,this.currentPageIdx)}},_previous:function(){if(this.prev){var a=this.currentPageIdx-this.pageCount;if(this.currentPageIdx!=0){this.currentPageIdx--}if(this.currentPageIdx==0){this.prev=false;this.prevAnchor.hide()}if(this.currentPageIdx!=(this.maxPage-1)){this.next=true;this.nextAnchor.show()}this.anchorCurrent.removeClass('pcCurrent').addClass('pcSel');this.anchorCurrent=this.itemAnchors[this.currentPageIdx];this.anchorCurrent.removeClass('pcSel').addClass('pcCurrent');this._addPageLeft();this.settings.onPrevClick(this,this.currentPageIdx);this.settings.onPageRequest(this,this.currentPageIdx)}},_selPage:function(a){if(this.currentPageIdx!=a){if(a==0){this.prev=false;this.prevAnchor.hide()}else{this.prev=true;this.prevAnchor.show()}if(a!=(this.maxPage-1)){this.next=true;this.nextAnchor.show()}else{this.next=false;this.nextAnchor.hide()}this.anchorCurrent.removeClass('pcCurrent').addClass('pcSel');this.anchorCurrent=this.itemAnchors[a];if(this.anchorCurrent==g){alert('undefined')}this.anchorCurrent.removeClass('pcSel').addClass('pcCurrent');if(this.currentPageIdx>a){while(this.currentPageIdx!=a){this.currentPageIdx--;this._addPageLeft()}}else{while(this.currentPageIdx!=a){this.currentPageIdx++;this._addPageRight()}this._addPageRight()}}},reInit:function(a){$(this.element).removeClass('paginatorComp');$(this.element).empty();if(this.settings.allowKeyNavigation){$('body').off('.paginator')}$.extend(this.settings,a[0]);this._init()}};$.fn[h]=function(a){var b=$(this).data(h);if(b&&a.indexOf('_')!=0){return b[a](Array.prototype.slice.call(arguments,1))}if(typeof a==='object'||!a){b=new Plugin(this,a);$(this).data(h,b);return $(this)}$.error('Wrong call to '+h)}})(jQuery,window,document);